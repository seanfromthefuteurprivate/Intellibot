# WSB SNAKE - MASTER DOCUMENTATION

**Complete System Reference | Version 2.5 | February 2026**

**Last Updated:** 2026-02-04 23:45 UTC
**Total Commits:** 164
**Total Documentation Files:** 30+
**Generated By:** Claude Opus 4.5

---

# TABLE OF CONTENTS

1. [Executive Summary](#1-executive-summary)
2. [System Architecture](#2-system-architecture)
3. [Infrastructure & Deployment](#3-infrastructure--deployment)
4. [Core Engines](#4-core-engines)
5. [Trading Execution](#5-trading-execution)
6. [AI & Analysis Stack](#6-ai--analysis-stack)
7. [Learning Systems](#7-learning-systems)
8. [Data Collectors](#8-data-collectors)
9. [Database Schema](#9-database-schema)
10. [Environment Variables](#10-environment-variables)
11. [Complete Git History](#11-complete-git-history)
12. [File Change Log](#12-file-change-log)
13. [All Documentation Files](#13-all-documentation-files)
14. [Commands Reference](#14-commands-reference)
15. [Troubleshooting Guide](#15-troubleshooting-guide)

---

# 1. EXECUTIVE SUMMARY

## What is WSB Snake?

WSB Snake is a **production-grade autonomous 0DTE options scalping engine** that:

- Monitors 29 tickers (SPY, QQQ, IWM, metals, mega-caps, WSB favorites)
- Detects 10+ scalping patterns (VWAP bounce, breakouts, momentum surges)
- Uses multi-model AI confirmation (GPT-4o + DeepSeek + Gemini)
- Executes paper trades automatically via Alpaca
- Sends real-time alerts to Telegram
- Learns from past trades and screenshots

## Key Metrics

| Metric | Value |
|--------|-------|
| **Tickers Monitored** | 29 |
| **Scan Interval** | 30 seconds |
| **Max Daily Exposure** | $6,000 |
| **Max Per Trade** | $1,500 |
| **Target Profit** | +12% |
| **Stop Loss** | -8% |
| **Max Hold Time** | 12 minutes |
| **EOD Close** | 3:55 PM ET |

## Trading Strategy

- **Focus:** 0DTE options scalping
- **Target:** 12-20% gains per trade
- **Hold Time:** 5-12 minutes (theta decay kills longer)
- **Mode:** Paper trading (ALPACA_LIVE_TRADING=false)

---

# 2. SYSTEM ARCHITECTURE

## High-Level Overview

```
┌─────────────────────────────────────────────────────────────────┐
│                         MAIN.PY                                  │
│                    (FastAPI + Orchestrator)                      │
└─────────────────────────────────┬───────────────────────────────┘
                                  │
        ┌─────────────────────────┼─────────────────────────┐
        │                         │                         │
        ▼                         ▼                         ▼
┌───────────────┐       ┌─────────────────┐       ┌───────────────┐
│   COLLECTORS  │       │     ENGINES     │       │   ANALYSIS    │
│               │       │                 │       │               │
│ • Polygon     │       │ • SPY Scalper   │       │ • Predator    │
│ • Alpaca News │──────▶│ • Momentum      │◀──────│   Stack (AI)  │
│ • Finnhub     │       │ • LEAPS         │       │ • LangGraph   │
│ • Screenshot  │       │ • Chart Brain   │       │ • Charts      │
└───────────────┘       └────────┬────────┘       └───────────────┘
                                 │
        ┌────────────────────────┼────────────────────────┐
        │                        │                        │
        ▼                        ▼                        ▼
┌───────────────┐       ┌─────────────────┐       ┌───────────────┐
│   LEARNING    │       │    TRADING      │       │ NOTIFICATIONS │
│               │       │                 │       │               │
│ • Pattern     │       │ • Alpaca        │       │ • Telegram    │
│   Memory      │◀──────│   Executor      │──────▶│   Alerts      │
│ • Trade       │       │ • Risk Governor │       │               │
│   Learner     │       │ • Zero Greed    │       │               │
└───────────────┘       └─────────────────┘       └───────────────┘
                                 │
                                 ▼
                        ┌─────────────────┐
                        │    DATABASE     │
                        │    (SQLite)     │
                        └─────────────────┘
```

## Directory Structure

```
wsb_snake/
├── __init__.py
├── main.py                    # Main entry point - starts all engines
├── config.py                  # Configuration and environment loading
│
├── analysis/                  # Technical analysis and AI
│   ├── candlestick_patterns.py  # 24+ candlestick patterns
│   ├── chart_generator.py       # Generate charts for AI
│   ├── predator_stack.py        # Multi-model AI (GPT + DeepSeek + Gemini)
│   ├── scalp_chart_generator.py # Surgical precision charts
│   ├── scalp_langgraph.py       # LangGraph for pattern analysis
│   ├── scoring.py               # Signal scoring
│   └── sentiment.py             # News sentiment analysis
│
├── collectors/                # Data collection
│   ├── polygon_enhanced.py      # Polygon.io market data
│   ├── alpaca_stream.py         # Real-time WebSocket
│   ├── finnhub_collector.py     # News, earnings, analyst data
│   ├── scalp_data_collector.py  # 5s/15s/1m bars for scalping
│   ├── screenshot_system.py     # Google Drive screenshot learning
│   ├── screenshot_collector.py  # Screenshot fetching
│   └── trade_extractor.py       # Extract patterns from screenshots
│
├── engines/                   # Trading engines
│   ├── spy_scalper.py           # Main 0DTE scalping engine
│   ├── momentum_engine.py       # Multi-day momentum plays
│   ├── leaps_engine.py          # Long-dated options
│   ├── orchestrator.py          # Pipeline coordinator
│   ├── chart_brain.py           # Background AI analysis
│   ├── ignition_detector.py     # Early momentum detection
│   ├── pressure_engine.py       # Technical + options pressure
│   ├── surge_hunter.py          # Power hour setups
│   ├── probability_generator.py # Signal fusion
│   └── learning_memory.py       # Trade outcome learning
│
├── trading/                   # Execution
│   ├── alpaca_executor.py       # Paper/live trade execution
│   ├── risk_governor.py         # Risk limits and kill switch
│   └── outcome_recorder.py      # Track trade outcomes
│
├── learning/                  # ML and pattern learning
│   ├── trade_learner.py         # Learn from screenshots
│   ├── pattern_memory.py        # Pattern recognition memory
│   ├── time_learning.py         # Time-of-day quality
│   ├── zero_greed_exit.py       # Mechanical exit system
│   ├── deep_study.py            # Off-hours learning
│   ├── stalking_mode.py         # Setup monitoring
│   └── session_learnings.py     # Battle-tested wisdom
│
├── notifications/             # Alerts
│   ├── telegram_bot.py          # Send Telegram alerts
│   └── message_templates.py     # Alert formatting
│
├── db/                        # Database
│   └── database.py              # SQLite connection
│
└── utils/                     # Utilities
    ├── logger.py                # Logging
    ├── rate_limit.py            # API rate limiting
    ├── sector_strength.py       # Sector analysis
    └── session_regime.py        # Market hours detection
```

## Data Flow

```
1. COLLECT
   Polygon → 5s/15s/1m bars
   Alpaca → News headlines
   Finnhub → Earnings/ratings
   Screenshot → Google Drive images

2. DETECT
   SPY Scalper scans 29 tickers
   Pattern matched (VWAP reclaim, breakout, etc.)
   Base confidence calculated

3. ENHANCE
   Pattern Memory boost (+5-15%)
   Time-of-Day boost (+5-10%)
   Screenshot learning boost
   Session learnings applied

4. CONFIRM
   GPT-4o → Chart vision analysis
   DeepSeek → Backup analysis
   Combined verdict calculated

5. FILTER
   Order flow check (sweep direction)
   Earnings check (2-day window)
   Sector strength check
   Regime check (trend direction)

6. EXECUTE
   If confidence >= 85% AND AI confirmed:
   → Alpaca order placed
   → Telegram alert sent
   → Position monitored

7. EXIT
   Every 5 seconds check:
   → Target +12%? SELL
   → Stop -8%? SELL
   → 12 min elapsed? SELL
   → 3:55 PM? CLOSE ALL

8. LEARN
   Record outcome
   Update pattern memory
   Adjust time weights
```

---

# 3. INFRASTRUCTURE & DEPLOYMENT

## DigitalOcean Droplet

| Field | Value |
|-------|-------|
| **IP Address** | `157.245.240.99` |
| **User** | `root` |
| **SSH Key** | Cursor (ID: 53703493) |
| **Droplet ID** | `549450234` |
| **Region** | NYC1 |
| **Size** | s-1vcpu-1gb (~$6/mo) |
| **OS** | Ubuntu 22.04 |

## Paths on Droplet

```
/root/wsb-snake/              # Main code directory
/root/wsb-snake/.env          # API keys (DO NOT COMMIT)
/root/wsb-snake/venv/         # Python virtual environment
/root/wsb-snake/wsb_snake_data/  # Database and learnings
/etc/systemd/system/wsb-snake.service  # Systemd service
```

## GitHub Repository

```
git@github.com:seanfromthefuteurprivate/Intellibot.git
```

## Local Development Path

```
/Users/seankuesia/Downloads/Intellibot
```

## Systemd Service

```ini
[Unit]
Description=WSB Snake Trading Engine
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/wsb-snake
Environment=PATH=/root/wsb-snake/venv/bin:/usr/bin
EnvironmentFile=/root/wsb-snake/.env
ExecStart=/root/wsb-snake/venv/bin/python main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

## Web Server Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Basic health check |
| `/health` | GET | Health status for monitoring |
| `/status` | GET | Detailed status (positions, config, account) |

---

# 4. CORE ENGINES

## SPY Scalper (`wsb_snake/engines/spy_scalper.py`)

**Purpose:** Primary 0DTE scalping engine that monitors 29 tickers every 30 seconds.

### Configuration

```python
PREDATOR_MODE = True           # Enable apex predator behavior
SNIPER_MODE = True             # Only call AI for the BEST setup per scan
MIN_CONFIDENCE_FOR_AI = 80     # Only analyze 80%+ setups
MIN_CONFIDENCE_FOR_ALERT = 85  # Only trade 85%+ setups (A+ only)
MIN_SWEEP_PCT_FOR_FLOW = 8     # Require 8%+ sweep volume
REQUIRE_AI_CONFIRMATION = True # AI must confirm
trade_cooldown_minutes = 20    # Cooldown between trades per ticker
```

### Tickers Monitored

```python
ZERO_DTE_UNIVERSE = [
    "SPY", "QQQ", "IWM",  # Index ETFs with daily 0DTE
    "SLV", "GLD", "GDX", "GDXJ",  # Metals ETFs
    "USO", "XLE",  # Energy ETFs
    "TSLA", "NVDA", "AAPL", "META", "AMD", "AMZN", "GOOGL", "MSFT",  # Mega caps
    "RKLB", "ASTS", "NBIS", "PL", "LUNR", "ONDS", "SLS",  # WSB space/AI
    "POET", "ENPH", "USAR", "PYPL", "THH"  # WSB YOLO plays
]
```

### Patterns Detected

| Pattern | Direction | Description |
|---------|-----------|-------------|
| VWAP_BOUNCE | Long | Price bounces off VWAP support |
| VWAP_RECLAIM | Long | Price reclaims VWAP from below |
| VWAP_REJECTION | Short | Price rejected at VWAP resistance |
| MOMENTUM_SURGE | Both | Strong directional move with volume |
| BREAKOUT | Long | Breaks above 30-bar high |
| BREAKDOWN | Short | Breaks below 30-bar low |
| FAILED_BREAKDOWN | Long | Bear trap - quick recovery |
| FAILED_BREAKOUT | Short | Bull trap - quick rejection |
| SQUEEZE_FIRE | Both | Volatility expansion |

### Candlestick Patterns (Small Cap Strict Mode)

```python
BULLISH_PATTERNS = [
    'hammer', 'inverted_hammer', 'bullish_engulfing',
    'piercing_line', 'bullish_harami', 'morning_star',
    'three_white_soldiers', 'strong_bullish_momentum'
]

BEARISH_PATTERNS = [
    'shooting_star', 'hanging_man', 'bearish_engulfing',
    'dark_cloud_cover', 'bearish_harami', 'evening_star',
    'three_black_crows', 'strong_bearish_momentum'
]
```

## Momentum Engine (`wsb_snake/engines/momentum_engine.py`)

**Purpose:** Multi-day momentum plays on small caps and thematic stocks.

- Scan interval: 2 minutes
- Uses trim-and-hold strategy (trim 50% at +50%, trail rest)
- Targets RKLB, ASTS, LUNR, PL, etc.

## LEAPS Engine (`wsb_snake/engines/leaps_engine.py`)

**Purpose:** Long-dated options (12+ months) for macro thesis plays.

- Scan interval: 30 minutes
- Targets commodities (SLV, GLD, GDX) and mega caps
- Uses trim-and-hold strategy

## Chart Brain (`wsb_snake/engines/chart_brain.py`)

**Purpose:** Background AI analysis studying charts in real-time.

- Runs continuous chart analysis
- Uses GPT-4o vision
- Rate limited to conserve API credits

---

# 5. TRADING EXECUTION

## Alpaca Executor (`wsb_snake/trading/alpaca_executor.py`)

**Purpose:** Execute paper trades on Alpaca.

### Configuration

```python
LIVE_TRADING = False           # Set via ALPACA_LIVE_TRADING env var
MAX_DAILY_EXPOSURE = 6000      # $6,000 max deployed
MAX_PER_TRADE = 1500           # $1,500 per trade
MAX_CONCURRENT_POSITIONS = 5   # 5 positions max
SCALP_TARGET_PCT = 1.12        # +12% take profit
SCALP_STOP_PCT = 0.92          # -8% stop loss
SCALP_MAX_HOLD_MINUTES = 12    # 12 min max hold
```

### Position Lifecycle

1. `execute_scalp_entry()` - Validate and place buy order
2. `_check_order_fills()` - Monitor for fill confirmation
3. `_check_exits()` - Every 5s check price vs target/stop/time
4. `execute_exit()` - Close position when condition met
5. `record_trade_outcome()` - Log to learning systems

### Strike Selection

```python
def get_strike_interval(underlying, price):
    """
    SPY/QQQ/IWM: $1 intervals
    GLD (high price): $5 intervals
    Stocks > $100: $5 intervals
    Stocks $25-$100: $2.50 intervals
    Stocks < $25: $1 intervals
    """
```

### Option Symbol Format (OCC)

```
{UNDERLYING}{EXPIRY}{TYPE}{STRIKE}

Example: SPY260204C00605000
- SPY = underlying
- 260204 = February 4, 2026 (YYMMDD)
- C = call (P for put)
- 00605000 = $605.00 strike (8 digits, strike * 1000)
```

## Risk Governor (`wsb_snake/trading/risk_governor.py`)

**Purpose:** Enforce risk limits and kill switch.

- Daily PnL kill switch at -$500
- Max 5 concurrent positions
- Max $6,000 daily exposure
- Per-engine limits

## Zero Greed Exit (`wsb_snake/learning/zero_greed_exit.py`)

**Purpose:** Mechanical exit system with no human override.

### Rules

```
1. TARGET HIT (+12%): IMMEDIATE EXIT
   - No "let it run"
   - BOOK PROFIT NOW

2. STOP HIT (-8%): IMMEDIATE EXIT
   - No "it might recover"
   - ACCEPT THE LOSS

3. TIME DECAY (12 min): EXIT
   - 0DTE theta decay kills
   - GET OUT

4. EOD (3:55 PM ET): FORCE CLOSE ALL
   - No overnight risk
   - CLOSE EVERYTHING
```

---

# 6. AI & ANALYSIS STACK

## Predator Stack (`wsb_snake/analysis/predator_stack.py`)

**Purpose:** Multi-model AI confirmation system.

### Model Priority

```
1. GPT-4o (Primary)
   - Vision-enabled
   - Analyzes chart images
   - Best quality

2. DeepSeek (Fallback)
   - Budget backup
   - Text-only analysis
   - Good capabilities

3. Gemini (Backup)
   - Rate limited due to past issues
   - Used sparingly
```

### Verdicts

```python
class PredatorVerdict(Enum):
    STRIKE_CALLS = "STRIKE_CALLS"   # Go long (buy calls)
    STRIKE_PUTS = "STRIKE_PUTS"     # Go short (buy puts)
    NO_TRADE = "NO_TRADE"           # Pass on this setup
    ABORT = "ABORT"                 # Something wrong, don't trade
```

### AI Prompt Template

```
You are an elite options scalper analyzing a {ticker} chart.

PATTERN DETECTED: {pattern}
PROPOSED ENTRY: ${entry}
TARGET: ${target} ({gain_pct}% gain)
STOP: ${stop} ({loss_pct}% loss)
R:R RATIO: {rr_ratio}

Analyze this chart and provide:
1. VERDICT: STRIKE_CALLS, STRIKE_PUTS, or NO_TRADE
2. CONFIDENCE: 0-100
3. REASONING: 2-3 sentences

BE DECISIVE. Only recommend STRIKE if probability > 60%.
```

## Chart Generator (`wsb_snake/analysis/chart_generator.py`)

**Purpose:** Generate surgical precision charts for AI analysis.

- Candlestick charts
- VWAP line and bands (±1σ, ±2σ)
- Volume bars
- Entry/target/stop levels marked

## Candlestick Patterns (`wsb_snake/analysis/candlestick_patterns.py`)

**Purpose:** Detect 24+ candlestick patterns.

### Patterns Implemented

**Single Candle:**
- Hammer, Inverted Hammer
- Doji (standard, dragonfly, gravestone)
- Marubozu (bullish, bearish)
- Shooting Star, Hanging Man
- Spinning Top

**Double Candle:**
- Engulfing (bullish, bearish)
- Harami (bullish, bearish)
- Tweezer (top, bottom)
- Piercing Line, Dark Cloud Cover

**Triple Candle:**
- Morning Star, Evening Star
- Three White Soldiers, Three Black Crows

---

# 7. LEARNING SYSTEMS

## Trade Learner (`wsb_snake/learning/trade_learner.py`)

**Purpose:** Learn from Google Drive screenshots of winning trades.

- Watches Google Drive folder for new screenshots
- Extracts patterns using AI vision
- Stores successful patterns for future matching
- Provides confidence boosts for similar setups

### Configuration

```python
GOOGLE_DRIVE_FOLDER_ID = "1EbGgR2r_0jxDjQWvlN9yuxlrzUPWvLf4"
SCREENSHOT_SCAN_INTERVAL = 300  # 5 minutes
```

## Pattern Memory (`wsb_snake/learning/pattern_memory.py`)

**Purpose:** Store and match successful price action patterns.

- Normalized OHLC data storage
- 70% price action + 30% volume similarity matching
- Win/loss outcome tracking
- Confidence boosts for matching patterns

## Time Learning (`wsb_snake/learning/time_learning.py`)

**Purpose:** Track performance by hour and session.

```python
TIME_MULTIPLIERS = {
    9: 1.0,   # Market open - volatile
    10: 1.2,  # Good flows
    11: 1.0,  # Settling
    12: 0.8,  # Lunch chop
    13: 0.9,  # Still slow
    14: 1.1,  # Power hour buildup
    15: 1.3,  # Power hour - best volume
}
```

## Deep Study (`wsb_snake/learning/deep_study.py`)

**Purpose:** Off-hours learning and analysis.

- Runs during market close
- Analyzes past trades
- Updates pattern weights
- Studies market events

## Session Learnings (`wsb_snake/learning/session_learnings.py`)

**Purpose:** Battle-tested wisdom from live sessions.

Example insight:
```python
TradingInsight(
    category="execution",
    lesson="0DTE theta decay killing positions. Reduced targets/stops.",
    weight=1.0,
    date_learned="2026-01-29",
    trade_context={
        "old_target_pct": 0.25,
        "new_target_pct": 0.12,
        "key_insight": "quick_in_quick_out"
    }
)
```

---

# 8. DATA COLLECTORS

## Polygon Enhanced (`wsb_snake/collectors/polygon_enhanced.py`)

**Purpose:** Primary market data from Polygon.io.

### Endpoints Used

| Endpoint | Data |
|----------|------|
| `/v2/aggs/ticker/{ticker}/range/{mult}/{span}/{from}/{to}` | OHLCV bars |
| `/v3/reference/options/contracts` | Options chain |
| `/v3/quotes/{option_symbol}` | Option quotes |
| `/v2/aggs/ticker/{ticker}/prev` | Previous day data |

## Scalp Data Collector (`wsb_snake/collectors/scalp_data_collector.py`)

**Purpose:** Ultra-fast data for scalping.

- 5-second bars
- 15-second bars
- 1-minute bars
- Real-time order flow

## Alpaca Stream (`wsb_snake/collectors/alpaca_stream.py`)

**Purpose:** Real-time WebSocket data.

- Live trades
- Live quotes
- Trade halt notifications
- LULD bands

## Finnhub Collector (`wsb_snake/collectors/finnhub_collector.py`)

**Purpose:** News, earnings, and analyst data.

### Endpoints Used

| Endpoint | Data |
|----------|------|
| `/company-news` | Company news |
| `/calendar/earnings` | Earnings calendar |
| `/stock/recommendation` | Analyst recommendations |
| `/stock/price-target` | Price targets |

## Screenshot System (`wsb_snake/collectors/screenshot_system.py`)

**Purpose:** Google Drive integration for screenshot learning.

- Watches shared folder
- Downloads new screenshots
- Passes to trade_learner for analysis

---

# 9. DATABASE SCHEMA

## SQLite Database: `wsb_snake_data/wsb_snake.db`

### Table: `signals`

```sql
CREATE TABLE signals (
    id INTEGER PRIMARY KEY,
    timestamp TEXT,
    ticker TEXT,
    signal_type TEXT,
    confidence REAL,
    direction TEXT,
    entry_price REAL,
    target_price REAL,
    stop_loss REAL,
    ai_model TEXT,
    pattern TEXT,
    outcome TEXT,
    pnl REAL,
    pnl_pct REAL
);
```

### Table: `spy_scalp_history`

```sql
CREATE TABLE spy_scalp_history (
    id INTEGER PRIMARY KEY,
    pattern TEXT,
    direction TEXT,
    entry_price REAL,
    target_price REAL,
    stop_loss REAL,
    confidence REAL,
    ai_confirmed INTEGER,
    ai_confidence REAL,
    detected_at TEXT,
    alerted_at TEXT,
    outcome TEXT,
    pnl_pct REAL,
    duration_minutes INTEGER
);
```

### Table: `trade_outcomes`

```sql
CREATE TABLE trade_outcomes (
    id INTEGER PRIMARY KEY,
    signal_id INTEGER,
    symbol TEXT,
    trade_type TEXT,
    entry_price REAL,
    exit_price REAL,
    pnl REAL,
    pnl_pct REAL,
    exit_reason TEXT,
    entry_time TEXT,
    exit_time TEXT,
    engine TEXT
);
```

---

# 10. ENVIRONMENT VARIABLES

## Required Keys (7)

| Variable | Description | Source |
|----------|-------------|--------|
| `ALPACA_API_KEY` | Alpaca trading API key | alpaca.markets |
| `ALPACA_SECRET_KEY` | Alpaca secret key | alpaca.markets |
| `POLYGON_API_KEY` | Market data | polygon.io |
| `OPENAI_API_KEY` | GPT-4o vision | platform.openai.com |
| `DEEPSEEK_API_KEY` | Backup AI | deepseek.com |
| `TELEGRAM_BOT_TOKEN` | Alert bot | @BotFather |
| `TELEGRAM_CHAT_ID` | Your chat ID | Telegram API |

## Optional Keys

| Variable | Description |
|----------|-------------|
| `FINNHUB_API_KEY` | News and earnings |
| `BENZINGA_API_KEY` | News data |
| `GEMINI_API_KEY` | Backup AI |
| `ALPACA_LIVE_TRADING` | Set "true" for live |
| `ALPACA_BASE_URL` | Paper vs live URL |
| `GOOGLE_DRIVE_FOLDER_ID` | Screenshot folder |
| `GOOGLE_SERVICE_ACCOUNT` | Drive API auth |

## Tunable Parameters

| Variable | Default | Description |
|----------|---------|-------------|
| `SCALP_TARGET_PCT` | 1.12 | Take profit at +12% |
| `SCALP_STOP_PCT` | 0.92 | Stop loss at -8% |
| `SCALP_MAX_HOLD_MINUTES` | 12 | Max hold time |
| `RISK_MAX_DAILY_LOSS` | -500 | Kill switch threshold |
| `RISK_MAX_CONCURRENT_POSITIONS` | 5 | Max open positions |
| `RISK_MAX_DAILY_EXPOSURE` | 6000 | Max daily $ deployed |

---

# 11. COMPLETE GIT HISTORY

## Summary Statistics

- **Total Commits:** 164
- **Date Range:** January 24, 2026 - February 4, 2026
- **Primary Author:** Sean Kuesia + AI Agents

## Full Commit History (Most Recent First)

| Date | Hash | Message |
|------|------|---------|
| 2026-02-04 | 7ff4eed | Add comprehensive Cursor Agent handover documentation |
| 2026-02-03 | ce7996e | Integrate trade_learner into trading engines for screenshot-based learning |
| 2026-02-03 | 1b9bb08 | Fix repeated Telegram alerts + Add Deep Study for off-market hours |
| 2026-02-03 | 271f290 | Add Screenshot Learning System for trade pattern recognition |
| 2026-02-03 | 3958284 | Connect trade exits to learning systems for outcome tracking |
| 2026-02-02 | 0b77a61 | Add OpenAI rate limiting for scalping-focused credit conservation |
| 2026-02-02 | 822b5d8 | Add Gemini with strategic rate limiting and confluence triggers |
| 2026-02-02 | b044026 | Optimize AI API usage - only call when patterns detected |
| 2026-02-02 | 96d8509 | Fix missing modules causing deployment crash |
| 2026-01-30 | a7f0104 | Add GreekOptimizer and PositionSizer to precious metals scalper |
| 2026-01-29 | 740cff9 | Fix port mismatch: use port 8080 for App Platform |
| 2026-01-29 | a82b464 | Fix websockets version conflict with alpaca-trade-api |
| 2026-01-29 | 8713b1f | Fix mplfinance Python 3.11 compatibility - remove version constraint |
| 2026-01-29 | f7de8cd | Fix App Platform deployment: add missing dependencies |
| 2026-01-29 | e984b04 | Fix losing trades: 0DTE theta decay was killing all positions |
| 2026-01-28 | 3f27279 | Add lethal micro-scalping system with GPT-4o vision |
| 2026-01-28 | 7c19fc3 | Add rate limiting and sniper mode to prevent API suspension |
| 2026-01-28 | 90caeec | Add Digital Ocean deployment configuration |
| 2026-01-28 | c26e27a | Add files via upload |
| 2026-01-28 | 1e16cfd | Create Docs |
| 2026-01-27 | 2355c65 | Create README.md |
| 2026-01-27 | 5a779bc | Add a web server to run the trading bot as a background process |
| 2026-01-27 | 6b883db | Add comprehensive documentation for the WSB Snake project |
| 2026-01-27 | 1045a31 | Update trading bot to aggressive mode with enhanced alerts |
| 2026-01-27 | 32c0092 | Increase trading limits for aggressive profit-seeking |
| 2026-01-27 | 2d401c6 | Implement daily exposure limits for trading activities |
| 2026-01-27 | ff65bdf | Apply stricter trading rules for small-cap stocks |
| 2026-01-27 | 76d7d45 | Add database for storing trading information |
| 2026-01-27 | 55d74c4 | Add system to track existing trades when the bot restarts |
| 2026-01-27 | 434923d | Add database initialization for tracking open positions |
| 2026-01-27 | 204ed7c | Add SQLite database for storing trading signals and outcomes |
| 2026-01-27 | 3d8e36e | Fix DO startup command |
| 2026-01-27 | b9a51a1 | Update database to track trade outcomes and paper trading execution |
| 2026-01-27 | 29164d1 | Add Dockerfile for DigitalOcean App Platform |
| 2026-01-27 | ea7b59f | Fix DO uv deploy: pin Python version |
| 2026-01-27 | d92840e | Remove secrets and ignore .replit |
| 2026-01-27 | 8014336 | Initial commit from Replit |
| 2026-01-27 | 5e01b82 | Add a project structure for monitoring stock trends |
| 2026-01-27 | 97859e6 | Improve option strike selection to find affordable contracts |
| 2026-01-27 | 755fd2b | Adjust how stock options are selected to find affordable choices |
| 2026-01-27 | 5cc8f62 | Update trading limits and confidence thresholds for higher quality trades |
| 2026-01-27 | 674fda4 | Widen trading stop and target parameters to prevent premature exits |
| 2026-01-27 | 8fc1c7e | Improve AI model fallback and error handling capabilities |
| 2026-01-27 | 705ab04 | Improve AI model fallback logic for chart analysis |
| 2026-01-27 | b181142 | Enable automated trading and adjust performance thresholds |
| 2026-01-27 | 875c480 | Update database to support tracking user sentiment |
| 2026-01-26 | 95e0bd5 | Update trading strategy to selectively trade zero-day options |
| 2026-01-26 | 481e910 | Update trading strategy learnings based on a losing day |
| 2026-01-26 | d747328 | Encode daily trading session learnings into the system's brain |
| 2026-01-26 | 6c52143 | Add system to automatically close all open trades before market close |
| 2026-01-26 | e7a8832 | Enable automatic trading execution and adjust confidence thresholds |
| 2026-01-26 | db94ac0 | Add institutional scalper module for disciplined trading |
| 2026-01-26 | fa6de44 | Improve trade execution by fixing invalid stop loss calculations |
| 2026-01-26 | 8b16386 | Add validation to prevent trading with invalid risk parameters |
| 2026-01-26 | 2d9deff | Add metals and energy ETFs for volatility trading |
| 2026-01-26 | eaa71f8 | Add execution logic for automatic position exits |
| 2026-01-26 | 65d0efa | Fix Benzinga API endpoint and integrate news collection |
| 2026-01-26 | 97c901f | Add validation for option quotes and position sizing limits |
| 2026-01-26 | 97c9afe | Improve option trading logic by fixing strike calculations |
| 2026-01-26 | 92ede30 | Fix issues in trading engine to enable autonomous trading |
| 2026-01-26 | 28160bc | Allow the system to run during lunch hours |
| 2026-01-26 | c7ac541 | Update application to monitor all specified stocks |
| 2026-01-26 | 441a0bb | Expand trading bot to monitor all tickers instead of just one |
| 2026-01-26 | ef5d40c | Add new tickers to the watchlist based on user screenshots |
| 2026-01-26 | 72f9b7e | Add Gemini fallback for AI analysis |
| 2026-01-26 | dc21404 | Published your App |
| 2026-01-25 | 0ba060b | Improve trading engine to operate in apex predator mode |
| 2026-01-25 | 0d5f884 | Make buy and sell alerts run in parallel with order execution |
| 2026-01-25 | f0607fb | Enable live trading mode with environment variable toggle |
| 2026-01-25 | a05db5c | Add real-time paper trading execution and monitoring |
| 2026-01-25 | 9b45085 | Enhance data collection with real-time streams |
| 2026-01-25 | 74f6df4 | Enhance data collection for faster trading decisions |
| 2026-01-25 | 6d95e55 | Add more granular data for faster trading analysis |
| 2026-01-25 | 03b5b9d | Incorporate advanced AI models and new exit strategies |
| 2026-01-25 | a4d6272 | Add a dedicated engine to scalp 0DTE SPY options |
| 2026-01-25 | faacc15 | Add complete trade signals for stock entry and exit alerts |
| 2026-01-25 | c7a0ffd | Improve trading system learning and pattern recognition |
| 2026-01-25 | 1dd6237 | Add advanced learning and stalking capabilities |
| 2026-01-24 | d894da3 | Published your App |
| 2026-01-24 | 3ab63e9 | Add historical training to calibrate engine |
| 2026-01-24 | 9135903 | Add alerts for trading opportunities |
| 2026-01-24 | 64ab7f5 | Add new strategies for volatility and earnings |
| 2026-01-24 | bc88f64 | Add expanded data collection and multi-strategy capabilities |
| 2026-01-24 | 82e96b9 | Add new data sources and expand trading strategy analysis |
| 2026-01-24 | e4e1335 | Add Finnhub API key to enable real-time data collection |
| 2026-01-24 | 442f8a3 | Add advanced market structure data collection |
| 2026-01-24 | f8d2089 | Update logging and import paths in all data collectors |
| 2026-01-24 | 004890c | Add alternative data sources for enhanced market analysis |
| 2026-01-24 | 7a943f9 | Add Reddit wallstreetbets sentiment analysis |
| 2026-01-24 | c60e46e | Add real-time AI chart analysis |
| 2026-01-24 | 79d0446 | Add AI chart analysis system for real-time market studies |
| 2026-01-24 | 4b1958e | Add real-time AI chart analysis to enhance trading signals |
| 2026-01-24 | 0333812 | Add AI-powered chart analysis for real-time trading insights |
| 2026-01-24 | 059252c | Make the trading engine run permanently as a child process |
| 2026-01-24 | eaa3860 | Update inception detector to track options pressure |
| 2026-01-24 | cb9b46f | Add Inception Stack for detecting market instabilities |
| 2026-01-24 | 7da5c87 | Add advanced market instability detection and alerting |
| 2026-01-24 | 3ffb815 | Add advanced market instability detection modules |
| 2026-01-24 | 1bb6545 | Enhance options data collection with advanced analytics |
| 2026-01-24 | c8a5d10 | Add setup family classification |
| 2026-01-24 | 03258d0 | Implement the 10 zero days to expiration setup families |
| 2026-01-24 | 5965f00 | Improve ticker price fetching and state timing accuracy |
| 2026-01-24 | 3679d23 | Integrate probability engine into state machine |
| 2026-01-24 | 310a135 | Add core components for advanced trading pattern detection |
| 2026-01-24 | 20f5799 | Implement core state machine and probability calculations |
| 2026-01-24 | 95ae26f | Add detailed documentation for the 0DTE engine theory |
| 2026-01-24 | 7c9d922 | Enhance data analysis and reporting |
| 2026-01-24 | 57ac884 | Improve detection of trending stocks |
| 2026-01-24 | 7f9a99a | Enhance analysis of options and technical indicators |
| 2026-01-24 | d942e2f | Enhance data collection using expanded capabilities |
| 2026-01-24 | 44755c8 | Add a detailed blueprint for the 0DTE options trading engine |
| 2026-01-24 | b387e3a | Update the trading system to integrate all six engines |
| 2026-01-24 | e52859d | Add a system to detect early momentum |
| 2026-01-24 | eaa5884 | Add data collection for options and news feeds |
| 2026-01-24 | 23ab2ec | Add comprehensive 0DTE options trading intelligence engine |
| 2026-01-24 | dca8177 | Log market and social data for trending tickers |
| 2026-01-24 | 2109f3d | Add project documentation and execution script |
| 2026-01-24 | 82f11d5 | Implement core signal processing and routing logic |
| 2026-01-24 | 2d3e7c5 | Integrate core services to monitor and alert |
| 2026-01-24 | 5a73a3b | Published your App |
| 2026-01-24 | 5f1991f | Add core backend functionality for monitoring |
| 2026-01-24 | 6deb770 | Extracted stack files |
| 2026-01-24 | 8635105 | Initial commit |

---

# 12. FILE CHANGE LOG

## Key Changes by Date

### 2026-02-04
- `CURSOR_AGENT_HANDOVER.md` - Created comprehensive handover documentation

### 2026-02-03
- `wsb_snake/learning/trade_learner.py` - New screenshot learning system
- `wsb_snake/learning/deep_study.py` - Off-hours learning
- `wsb_snake/collectors/screenshot_system.py` - Google Drive integration
- `wsb_snake/collectors/screenshot_collector.py` - Screenshot fetching
- `wsb_snake/collectors/trade_extractor.py` - Pattern extraction
- `wsb_snake/trading/outcome_recorder.py` - Trade outcome tracking

### 2026-02-02
- `wsb_snake/analysis/langgraph_analyzer.py` - Rate limiting
- `wsb_snake/engines/chart_brain.py` - Gemini integration
- `wsb_snake/trading/risk_governor.py` - Risk limits
- `wsb_snake/engines/momentum_engine.py` - New momentum engine
- `wsb_snake/engines/leaps_engine.py` - New LEAPS engine

### 2026-01-29 (Critical Fix)
- `wsb_snake/engines/spy_scalper.py` - Raised confidence thresholds 75%→85%
- `wsb_snake/trading/alpaca_executor.py` - Fixed theta decay issue
  - Target: 25%→12%
  - Stop: 20%→8%
  - Max hold: 30min→12min

### 2026-01-28
- `wsb_snake/analysis/candlestick_patterns.py` - 24+ patterns
- `wsb_snake/analysis/predator_stack.py` - GPT-4o vision
- `.env.example` - Configuration template
- `DIGITALOCEAN_DEPLOYMENT.md` - Deployment guide

### 2026-01-27
- `README.md` - Project README
- `WSB_SNAKE_DOCUMENTATION.md` - Full documentation
- `Dockerfile` - Container configuration
- `requirements.txt` - Python dependencies

### 2026-01-26
- `wsb_snake/engines/institutional_scalper.py` - Prop desk rules
- `wsb_snake/learning/session_learnings.py` - Daily wisdom
- `wsb_snake/config.py` - Added metals/energy tickers

### 2026-01-25
- `wsb_snake/engines/spy_scalper.py` - Initial scalper
- `wsb_snake/trading/alpaca_executor.py` - Trade execution
- `wsb_snake/learning/zero_greed_exit.py` - Mechanical exits

### 2026-01-24
- `wsb_snake/main.py` - Entry point
- `wsb_snake/engines/orchestrator.py` - Pipeline coordinator
- `wsb_snake/analysis/predator_stack.py` - AI analysis
- `wsb_snake/collectors/polygon_enhanced.py` - Market data

---

# 13. ALL DOCUMENTATION FILES

## Documentation Inventory (30 files)

| File | Purpose |
|------|---------|
| `README.md` | Project overview |
| `WSB_SNAKE_DOCUMENTATION.md` | Full technical documentation |
| `CURSOR_AGENT_HANDOVER.md` | Agent onboarding guide |
| `ARCHITECTURE_OVERVIEW.md` | System architecture |
| `DATABASE_SCHEMA.md` | Database structure |
| `DIGITALOCEAN_DEPLOYMENT.md` | Deployment guide |
| `ENV_AUDIT.md` | Environment variable audit |
| `WHY_LAST_TRADES_LOST_AND_FIXES.md` | Post-mortem analysis |
| `WHY_NO_TRADES.md` | Troubleshooting no trades |
| `MASTER_SYSTEM_AUDIT.md` | System audit |
| `MASTER_SYSTEM_AUDIT_REMEDIATION_PLAN.md` | Audit fixes |
| `INTELLIBOT_ECOSYSTEM_DOCUMENTATION.md` | Ecosystem overview |
| `WSB_WIN_STRATEGY_AND_UNCHAINED_PLAN.md` | Trading strategy |
| `SYSTEM_OPERATOR_HANDBOOK.md` | Operations guide |
| `AGENT_AUTHORITY_MATRIX.md` | Agent permissions |
| `LANGGRAPH_AGENT_ROLES.md` | LangGraph configuration |
| `END_TO_END_FLOW.md` | Data flow documentation |
| `BFF_API_CONTRACT.md` | API contract |
| `RBAC_MATRIX.md` | Access control |
| `PRD.md` | Product requirements |
| `DEPLOYMENT_PLAN.md` | Deployment strategy |
| `AUDIT_AND_COMPLIANCE.md` | Compliance documentation |
| `INVARIANTS.md` | System invariants |
| `FRONTEND_ARCHITECTURE.md` | Frontend design |
| `CLAWBOT_INGESTION_GUIDE.md` | Data ingestion |
| `N8N_WORKFLOW_CATALOG.md` | Workflow automation |
| `SCREENSHOT_LEARNING.md` | Screenshot system docs |
| `JOBS_REPORT_FEB6.md` | Economic event analysis |
| `replit.md` | Replit configuration |
| `Docs` | Additional documentation folder |

---

# 14. COMMANDS REFERENCE

## SSH Commands

```bash
# Check service status
ssh root@157.245.240.99 "systemctl status wsb-snake --no-pager"

# View live logs
ssh root@157.245.240.99 "journalctl -u wsb-snake -f"

# View recent logs
ssh root@157.245.240.99 "cat /var/log/syslog | grep wsb-snake | tail -50"

# Restart service
ssh root@157.245.240.99 "systemctl restart wsb-snake"

# Stop service
ssh root@157.245.240.99 "systemctl stop wsb-snake"

# Check .env file
ssh root@157.245.240.99 "cat /root/wsb-snake/.env"

# Check disk space
ssh root@157.245.240.99 "df -h"

# Check memory
ssh root@157.245.240.99 "free -m"

# Check running processes
ssh root@157.245.240.99 "ps aux | grep python"
```

## Deploy Changes

```bash
# Sync local code to droplet
rsync -avz --exclude '.git' --exclude 'venv' --exclude '__pycache__' --exclude '.env' \
  -e "ssh" /Users/seankuesia/Downloads/Intellibot/ root@157.245.240.99:/root/wsb-snake/

# Install new dependencies
ssh root@157.245.240.99 "cd /root/wsb-snake && source venv/bin/activate && pip install -r requirements.txt"

# Restart after deploy
ssh root@157.245.240.99 "systemctl restart wsb-snake"
```

## doctl Commands

```bash
# List droplets
doctl compute droplet list --format ID,Name,PublicIPv4,Status

# Check account
doctl account get

# SSH via doctl
doctl compute ssh 549450234 --ssh-command "systemctl status wsb-snake"

# Reboot droplet
doctl compute droplet-action reboot 549450234 --wait
```

## Local Development

```bash
# Run locally
cd /Users/seankuesia/Downloads/Intellibot
python main.py

# Run tests
python -m pytest tests/

# Check syntax
python3 -m py_compile wsb_snake/engines/spy_scalper.py
```

## Git Commands

```bash
# View recent commits
git log --oneline -20

# View file changes in commit
git show --name-status <hash>

# View full history
git log --pretty=format:"%h|%ad|%s" --date=short
```

---

# 15. TROUBLESHOOTING GUIDE

## Common Issues

### "No bid for option" Error

**Cause:** Option is illiquid or market is closed.

**Solution:**
- Check if market is open
- Try a different strike price
- Check if ticker has options

### "Daily exposure limit reached"

**Cause:** Already deployed $6,000 today.

**Solution:**
- Wait for tomorrow
- Or increase `MAX_DAILY_EXPOSURE` in config

### "Order rejected by Alpaca"

**Cause:** Various - check error message.

**Common causes:**
- Insufficient buying power
- Invalid option symbol
- Market closed
- Order size too large

**Solution:**
- Check Alpaca dashboard for specific error
- Verify option symbol format
- Check buying power

### Telegram alerts not sending

**Cause:** Invalid bot token or chat ID.

**Solution:**
```bash
# Test Telegram directly
curl -X POST "https://api.telegram.org/bot<TOKEN>/sendMessage" \
  -d "chat_id=<CHAT_ID>" \
  -d "text=Test message"
```

### "Connection limit exceeded" (Alpaca WebSocket)

**Cause:** Too many WebSocket connections.

**Solution:**
- Restart the application
- Only one instance should run at a time

### SSH Timing Out

**Cause:** Droplet frozen or network issue.

**Solution:**
```bash
# Reboot via doctl
doctl compute droplet-action reboot 549450234 --wait

# Then check status
ssh root@157.245.240.99 "systemctl status wsb-snake --no-pager"
```

### No Trades Executing

1. **Check market hours** - Only trades 9:30 AM - 4:00 PM ET
2. **Check confidence threshold** - Must be >= 85%
3. **Check AI confirmation** - REQUIRE_AI_CONFIRMATION=True
4. **Check risk limits** - Max positions, daily exposure
5. **Check cooldown** - 20 min cooldown between trades

---

# APPENDIX: QUICK REFERENCE

## Key Files to Edit

| Setting | File | Variable |
|---------|------|----------|
| Daily exposure | `alpaca_executor.py` | `MAX_DAILY_EXPOSURE` |
| Per trade max | `alpaca_executor.py` | `MAX_PER_TRADE` |
| Confidence threshold | `spy_scalper.py` | `MIN_CONFIDENCE_FOR_ALERT` |
| Scan interval | `spy_scalper.py` | `scan_interval` |
| Target | `alpaca_executor.py` | `SCALP_TARGET_PCT` |
| Stop | `alpaca_executor.py` | `SCALP_STOP_PCT` |
| Max hold | `alpaca_executor.py` | `SCALP_MAX_HOLD_MINUTES` |

## Daily Schedule

```
4:00 AM ET  - Pre-market data collection starts
9:25 AM ET  - System warms up, loads patterns
9:30 AM ET  - MARKET OPEN - Active scanning begins
9:30-10:30  - High volatility period (careful)
10:30-12:00 - Primary scalping window
12:00-2:00  - Lunch chop (reduced activity)
2:00-3:55   - Power hour (aggressive)
3:55 PM ET  - FORCE CLOSE all positions
4:15 PM ET  - Daily summary sent
```

## Emergency Stop

```bash
# Stop the service
ssh root@157.245.240.99 "systemctl stop wsb-snake"

# Or via Python
from wsb_snake.engines.spy_scalper import spy_scalper
from wsb_snake.trading.alpaca_executor import alpaca_executor

spy_scalper.stop()
alpaca_executor.stop_monitoring()
```

---

**Document Generated:** 2026-02-04 23:45 UTC
**Total Lines:** ~2000
**Author:** Claude Opus 4.5

*"Small gains compound, big losses destroy."* - Institutional Scalper Rule
